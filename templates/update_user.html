{% extends 'base.html' %}
{% block title %}Actualizar Usuario{% endblock %}
{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card">
            <div class="card-body">
                <h1>Actualizar Usuario</h1>
                {% if not user %}
                <form method="post">
                    <div class="form-group mb-3">
                        <label for="user_id">Cédula</label>
                        <input type="number" class="form-control" id="user_id" name="user_id">
                    </div>
                    <div class="form-group mb-3">
                        <label for="user_email">Correo</label>
                        <input type="email" class="form-control" id="user_email" name="user_email">
                    </div>
                    <button type="submit" name="search" class="btn btn-primary w-100">Buscar Usuario</button>
                </form>
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary w-100 mt-3">Regresar al Dashboard</a>
                {% else %}
                <form method="post">
                    <input type="hidden" name="user_id" value="{{ user['cedula'] }}">
                    <div class="form-group mb-3">
                        <label for="contrasena">Nueva Contraseña (opcional)</label>
                        <input type="password" class="form-control" id="contrasena" name="contrasena">
                    </div>
                    <div class="form-group mb-3">
                        <label for="cedula">Cédula</label>
                        <input type="number" class="form-control" id="cedula" name="cedula" value="{{ user['cedula'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="direccion">Dirección</label>
                        <input type="text" class="form-control" id="direccion" name="direccion" value="{{ user['direccion'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="correo">Correo</label>
                        <input type="email" class="form-control" id="correo" name="correo" value="{{ user['correo'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="telefono">Teléfono</label>
                        <input type="number" class="form-control" id="telefono" name="telefono" value="{{ user['telefono'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="ciudad">Ciudad</label>
                        <input type="text" class="form-control" id="ciudad" name="ciudad" value="{{ user['ciudad'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="departamento">Departamento</label>
                        <input type="text" class="form-control" id="departamento" name="departamento" value="{{ user['departamento'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="ubicacion_geografica">Ubicación Geográfica</label>
                        <input type="text" class="form-control" id="ubicacion_geografica" name="ubicacion_geografica" value="{{ user['ubicacion_geografica'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="estado">Estado</label>
                        <input type="text" class="form-control" id="estado" name="estado" value="{{ user['estado'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="fecha_de_corte">Fecha de Corte</label>
                        <input type="date" class="form-control" id="fecha_de_corte" name="fecha_de_corte" value="{{ user['fecha_de_corte'] }}" required>
                    </div>
                    <div class="form-group mb-3">
                        <label for="rol">Rol</label>
                        <select class="form-control" id="rol" name="rol" required>
                            <option value="admin" {% if user['rol'] == 'admin' %}selected{% endif %}>Admin</option>
                            <option value="usuario" {% if user['rol'] == 'usuario' %}selected{% endif %}>Usuario</option>
                        </select>
                    </div>
                    <button type="submit" name="update" class="btn btn-primary w-100">Actualizar Usuario</button>
                </form>
                <a href="{{ url_for('admin_dashboard') }}" class="btn btn-secondary w-100 mt-3">Regresar al Dashboard</a>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
